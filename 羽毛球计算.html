<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>深圳石岩羽毛球馆投资回报计算器 (本地版)</title>
    <!-- 引入 Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- 引入 React 和 ReactDOM -->
    <script crossorigin src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <!-- 引入 Babel 用于解析 JSX -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    
    <style>
        body { font-family: 'PingFang SC', 'Microsoft YaHei', sans-serif; }
        .toggle-checkbox:checked {
            right: 0;
            border-color: #f97316;
        }
        .toggle-checkbox:checked + .toggle-label {
            background-color: #f97316;
        }
        /* 自定义滑块样式 */
        input[type=range]::-webkit-slider-thumb {
            -webkit-appearance: none;
            height: 20px;
            width: 20px;
            border-radius: 50%;
            background: #ffffff;
            border: 2px solid #2563eb;
            cursor: pointer;
            margin-top: -8px; 
            box-shadow: 0 2px 4px rgba(0,0,0,0.2);
        }
        input[type=range]::-webkit-slider-runnable-track {
            width: 100%;
            height: 6px;
            cursor: pointer;
            background: #e2e8f0;
            border-radius: 4px;
        }
    </style>
</head>
<body class="bg-slate-50">
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useMemo } = React;

        // --- 图标组件 (内联 SVG) ---
        const IconWrapper = ({ children, className }) => (
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}>
                {children}
            </svg>
        );

        const Calculator = ({ size, className }) => <IconWrapper className={className}><rect width="16" height="20" x="4" y="2" rx="2"/><line x1="8" x2="16" y1="6" y2="6"/><line x1="16" x2="16" y1="14" y2="18"/><path d="M16 10h.01"/><path d="M12 10h.01"/><path d="M8 10h.01"/><path d="M12 14h.01"/><path d="M8 14h.01"/><path d="M12 18h.01"/><path d="M8 18h.01"/></IconWrapper>;
        const Zap = ({ size, className }) => <IconWrapper className={className}><polygon points="13 2 3 14 12 14 11 22 21 10 12 10 13 2"/></IconWrapper>;
        const Users = ({ size, className }) => <IconWrapper className={className}><path d="M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"/><circle cx="9" cy="7" r="4"/><path d="M22 21v-2a4 4 0 0 0-3-3.87"/><path d="M16 3.13a4 4 0 0 1 0 7.75"/></IconWrapper>;
        const Wallet = ({ size, className }) => <IconWrapper className={className}><path d="M21 12V7H5a2 2 0 0 1 0-4h14v4"/><path d="M3 5v14a2 2 0 0 0 2 2h16v-5"/><path d="M18 12a2 2 0 0 0 0 4h4v-4Z"/></IconWrapper>;
        const AlertTriangle = ({ size, className }) => <IconWrapper className={className}><path d="m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z"/><path d="M12 9v4"/><path d="M12 17h.01"/></IconWrapper>;
        const TrendingUp = ({ size, className }) => <IconWrapper className={className}><polyline points="22 7 13.5 15.5 8.5 10.5 2 17"/><polyline points="16 7 22 7 22 13"/></IconWrapper>;
        const Info = ({ size, className }) => <IconWrapper className={className}><circle cx="12" cy="12" r="10"/><path d="M12 16v-4"/><path d="M12 8h.01"/></IconWrapper>;
        const Plus = ({ size, className }) => <IconWrapper className={className}><path d="M5 12h14"/><path d="M12 5v14"/></IconWrapper>;
        const Trash2 = ({ size, className }) => <IconWrapper className={className}><path d="M3 6h18"/><path d="M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6"/><path d="M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2"/><line x1="10" x2="10" y1="11" y2="17"/><line x1="14" x2="14" y1="11" y2="17"/></IconWrapper>;
        const ShieldCheck = ({ size, className }) => <IconWrapper className={className}><path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10"/><path d="m9 12 2 2 4-4"/></IconWrapper>;
        const Dumbbell = ({ size, className }) => <IconWrapper className={className}><path d="m6.5 6.5 11 11"/><path d="m21 21-1-1"/><path d="m3 3 1 1"/><path d="m18 22 4-4"/><path d="m2 6 4-4"/><path d="m3 10 7-7"/><path d="m14 21 7-7"/></IconWrapper>;

        // --- 主程序 ---
        function BadmintonCalculator() {
            // --- 基础配置 ---
            const [numCourts, setNumCourts] = useState(6);
            const [rentPerSqm, setRentPerSqm] = useState(32); 
            const [courtSize, setCourtSize] = useState(150); 
            
            // --- 收入假设 ---
            const [revenuePerCourt, setRevenuePerCourt] = useState(6300); 
            
            // --- 硬件投入成本 (One-time) ---
            const costAcUnit = 4000;
            const costLightUnit = 2000; 
            // 地胶与龙骨配置
            const costKeelFloor = 130; // 龙骨+地胶单价
            const costMatOnly = 50;    // 仅地胶单价 (如果不做龙骨)
            const [numKeelCourts, setNumKeelCourts] = useState(6); // 默认全做龙骨
            
            // --- 运营成本 (Monthly) ---
            const electricityRate = 1.5;
            const waterBill = 300; 
            
            // --- 专家补充项 (人员与服务) ---
            const [hasManager, setHasManager] = useState(true); 
            const [managerSalary, setManagerSalary] = useState(4000);
            
            const [hasCleaner, setHasCleaner] = useState(false); 
            const [cleanerSalary, setCleanerSalary] = useState(3000);

            const [hasCoach, setHasCoach] = useState(false); // 新增：教练
            const [coachSalary, setCoachSalary] = useState(10000);
            
            const [hasMarketing, setHasMarketing] = useState(false); 
            const [marketingCost, setMarketingCost] = useState(1500);
            
            const [hasMaintenance, setHasMaintenance] = useState(false); 
            const [maintenanceCost, setMaintenanceCost] = useState(500);

            const [hasBroadband, setHasBroadband] = useState(false); 
            const [broadbandCost, setBroadbandCost] = useState(200);

            // --- 自定义费用 (新增) ---
            const [customExpenses, setCustomExpenses] = useState([]);

            const addCustomExpense = () => {
                const newId = customExpenses.length > 0 ? Math.max(...customExpenses.map(c => c.id)) + 1 : 1;
                setCustomExpenses([...customExpenses, { id: newId, name: '新增费用', cost: 1000 }]);
            };

            const removeCustomExpense = (id) => {
                setCustomExpenses(customExpenses.filter(c => c.id !== id));
            };

            const updateCustomExpense = (id, field, value) => {
                setCustomExpenses(customExpenses.map(c => 
                c.id === id ? { ...c, [field]: value } : c
                ));
            };

            const [summerMode, setSummerMode] = useState(false); 
            
            // --- 计算逻辑 ---

            const calculations = useMemo(() => {
                // 1. 场地基础数据
                const totalArea = numCourts * courtSize;
                
                // 2. 一次性投入 (CAPEX)
                const investAC = numCourts * costAcUnit;
                const investLights = numCourts * costLightUnit;
                
                // 地面投入计算：龙骨场地 + 普通场地
                // 确保龙骨场地数不超过总场地数
                const actualKeelCourts = Math.min(numKeelCourts, numCourts);
                const actualMatCourts = numCourts - actualKeelCourts;
                
                const investKeelFloor = actualKeelCourts * courtSize * costKeelFloor;
                const investMatFloor = actualMatCourts * courtSize * costMatOnly;
                const investFloorTotal = investKeelFloor + investMatFloor;

                const otherDecorAndMisc = (investAC + investLights + investFloorTotal) * 0.05; 
                
                const totalInvestment = investAC + investLights + investFloorTotal + otherDecorAndMisc;

                // 3. 每月固定成本 (Fixed OPEX)
                const monthlyRent = totalArea * rentPerSqm;
                const monthlyStaff = (hasManager ? managerSalary : 0) + 
                                    (hasCleaner ? cleanerSalary : 0) + 
                                    (hasCoach ? coachSalary : 0);
                
                const monthlyExtras = (hasMarketing ? marketingCost : 0) + 
                                    (hasMaintenance ? maintenanceCost : 0) + 
                                    (hasBroadband ? broadbandCost : 0);
                
                const monthlyCustom = customExpenses.reduce((sum, item) => sum + Number(item.cost), 0);

                // 4. 每月水电 (Variable OPEX)
                const dailyHours = summerMode ? 7 : 3; 
                const acPowerPerUnitPerHr = 8 / 3; 
                const lightPowerPerUnitPerHr = 4.5 / 3; 
                
                const dailyAcConsumption = numCourts * acPowerPerUnitPerHr * dailyHours;
                const dailyLightConsumptionAdjusted = numCourts * lightPowerPerUnitPerHr * (summerMode ? 7 : 5); 

                const monthlyElec = ((dailyAcConsumption + dailyLightConsumptionAdjusted) * 30) * electricityRate;
                const monthlyWater = waterBill; 

                const totalMonthlyCost = monthlyRent + monthlyStaff + monthlyExtras + monthlyCustom + monthlyElec + monthlyWater;

                // 5. 盈利分析
                const monthlyRevenue = numCourts * revenuePerCourt;
                const monthlyProfit = monthlyRevenue - totalMonthlyCost;
                const roiMonths = monthlyProfit > 0 ? totalInvestment / monthlyProfit : 999;

                return {
                investAC,
                investLights,
                investFloorTotal,
                actualKeelCourts,
                actualMatCourts,
                totalInvestment,
                monthlyRent,
                monthlyStaff,
                monthlyElec,
                monthlyWater,
                monthlyExtras,
                monthlyCustom,
                totalMonthlyCost,
                monthlyRevenue,
                monthlyProfit,
                roiMonths,
                otherDecorAndMisc
                };
            }, [numCourts, rentPerSqm, courtSize, revenuePerCourt, hasManager, managerSalary, hasCleaner, cleanerSalary, hasCoach, coachSalary, hasMarketing, marketingCost, hasMaintenance, maintenanceCost, hasBroadband, broadbandCost, customExpenses, summerMode, numKeelCourts]);

            return (
                <div className="min-h-screen bg-slate-50 p-4 font-sans text-slate-800">
                <div className="max-w-6xl mx-auto">
                    
                    {/* Header */}
                    <header className="mb-8 bg-gradient-to-r from-blue-700 to-indigo-800 p-6 rounded-2xl text-white shadow-lg">
                    <div className="flex items-center gap-3">
                        <div className="p-2 bg-white/20 rounded-lg">
                        <TrendingUp className="w-8 h-8" />
                        </div>
                        <div>
                        <h1 className="text-2xl font-bold">深圳石岩·羽毛球馆投资回报模型 (专家版 V2)</h1>
                        <p className="text-blue-100 text-sm mt-1">坐标：官田地铁站周边 | 高度自定义模式</p>
                        </div>
                    </div>
                    </header>

                    <div className="grid grid-cols-1 lg:grid-cols-12 gap-6">
                    
                    {/* 左侧：参数输入区 */}
                    <div className="lg:col-span-5 space-y-6">
                        
                        {/* 1. 基础规模与硬件 */}
                        <section className="bg-white p-5 rounded-xl shadow-sm border border-slate-200">
                        <h2 className="flex items-center gap-2 font-bold text-lg mb-4 text-slate-700">
                            <Calculator className="w-5 h-5 text-blue-600"/> 1. 场馆与硬件配置
                        </h2>
                        
                        <div className="space-y-4">
                            {/* 场地数量 */}
                            <div>
                            <label className="flex justify-between text-sm font-medium text-slate-600 mb-1">
                                总场地片数 <span className="text-blue-600 font-bold">{numCourts} 片</span>
                            </label>
                            <input 
                                type="range" min="4" max="20" step="1" 
                                value={numCourts} 
                                onChange={(e) => setNumCourts(parseInt(e.target.value))}
                                className="w-full h-2 bg-slate-200 rounded-lg appearance-none cursor-pointer accent-blue-600"
                            />
                            </div>

                            {/* 地面配置 (新增) */}
                            <div className="bg-slate-50 p-3 rounded-lg border border-slate-200">
                            <div className="flex justify-between items-center mb-2">
                                <label className="text-xs font-bold text-slate-700">专业龙骨木地板配置</label>
                                <span className="text-xs bg-white border px-1 rounded text-slate-500">
                                {Math.min(numKeelCourts, numCourts)}片龙骨 / {numCourts - Math.min(numKeelCourts, numCourts)}片普通
                                </span>
                            </div>
                            <div className="flex items-center gap-2">
                                <input 
                                type="range" min="0" max={numCourts} step="1" 
                                value={Math.min(numKeelCourts, numCourts)} 
                                onChange={(e) => setNumKeelCourts(parseInt(e.target.value))}
                                className="flex-1 h-2 bg-slate-200 rounded-lg appearance-none cursor-pointer accent-emerald-500"
                                />
                                <span className="text-sm w-8 text-right font-medium">{Math.min(numKeelCourts, numCourts)}</span>
                            </div>
                            <p className="text-[10px] text-slate-400 mt-1">
                                *龙骨成本约¥130/平 (比赛级)，普通地胶约¥50/平 (大众级)
                            </p>
                            </div>

                            <div className="grid grid-cols-2 gap-4">
                            <div>
                                <label className="block text-xs text-slate-500 mb-1">单片面积 (平米)</label>
                                <input 
                                type="number" value={courtSize}
                                onChange={(e) => setCourtSize(Number(e.target.value))}
                                className="w-full p-2 border border-slate-300 rounded text-sm focus:ring-2 focus:ring-blue-500 outline-none"
                                />
                            </div>
                            <div>
                                <label className="block text-xs text-slate-500 mb-1">租金单价 (元/平)</label>
                                <input 
                                type="number" value={rentPerSqm}
                                onChange={(e) => setRentPerSqm(Number(e.target.value))}
                                className="w-full p-2 border border-slate-300 rounded text-sm focus:ring-2 focus:ring-blue-500 outline-none"
                                />
                            </div>
                            </div>
                        </div>
                        </section>

                        {/* 2. 人员与自定义支出 */}
                        <section className="bg-white p-5 rounded-xl shadow-sm border border-slate-200">
                        <h2 className="flex items-center gap-2 font-bold text-lg mb-4 text-slate-700">
                            <Users className="w-5 h-5 text-orange-500"/> 2. 人员与自定义支出
                        </h2>
                        
                        <div className="space-y-3">
                            {/* 馆主 */}
                            <div className="flex items-center justify-between p-2 hover:bg-slate-50 rounded group">
                            <div className="flex items-center gap-2">
                                <input 
                                type="checkbox" checked={hasManager} 
                                onChange={(e) => setHasManager(e.target.checked)}
                                className="w-4 h-4 text-blue-600 rounded"
                                />
                                <span className="text-sm">全职馆主/店长</span>
                            </div>
                            <div className="flex items-center gap-1">
                                <span className="text-xs text-slate-400">¥</span>
                                <input 
                                type="number" value={managerSalary}
                                disabled={!hasManager}
                                onChange={(e) => setManagerSalary(Number(e.target.value))}
                                className="w-16 p-1 text-right text-sm border-b border-slate-300 focus:border-blue-500 outline-none bg-transparent"
                                />
                            </div>
                            </div>

                            {/* 教练 (新增) */}
                            <div className="flex items-center justify-between p-2 hover:bg-slate-50 rounded group">
                            <div className="flex items-center gap-2">
                                <input 
                                type="checkbox" checked={hasCoach} 
                                onChange={(e) => setHasCoach(e.target.checked)}
                                className="w-4 h-4 text-blue-600 rounded"
                                />
                                <div className="flex items-center gap-1">
                                    <Dumbbell className="w-3.5 h-3.5 text-purple-500"/>
                                    <span className="text-sm font-medium text-slate-700">驻场总教练/团队</span>
                                </div>
                            </div>
                            <div className="flex items-center gap-1">
                                <span className="text-xs text-slate-400">¥</span>
                                <input 
                                type="number" value={coachSalary}
                                disabled={!hasCoach}
                                onChange={(e) => setCoachSalary(Number(e.target.value))}
                                className="w-16 p-1 text-right text-sm border-b border-slate-300 focus:border-blue-500 outline-none bg-transparent"
                                />
                            </div>
                            </div>

                            {/* 营销 & 维护 & 宽带 & 保洁 */}
                            {[
                                { label: '保洁杂工', state: hasCleaner, setter: setHasCleaner, val: cleanerSalary, valSetter: setCleanerSalary },
                                { label: '美团/点评推广', state: hasMarketing, setter: setHasMarketing, val: marketingCost, valSetter: setMarketingCost },
                                { label: '日常维护/损耗', state: hasMaintenance, setter: setHasMaintenance, val: maintenanceCost, valSetter: setMaintenanceCost },
                                { label: '宽带/监控', state: hasBroadband, setter: setHasBroadband, val: broadbandCost, valSetter: setBroadbandCost },
                            ].map((item, idx) => (
                                <div key={idx} className="flex items-center justify-between p-2 hover:bg-slate-50 rounded">
                                    <div className="flex items-center gap-2">
                                        <input 
                                        type="checkbox" checked={item.state} 
                                        onChange={(e) => item.setter(e.target.checked)}
                                        className="w-4 h-4 text-blue-600 rounded"
                                        />
                                        <span className="text-sm text-slate-600">{item.label}</span>
                                    </div>
                                    <div className="flex items-center gap-1">
                                        <span className="text-xs text-slate-400">¥</span>
                                        <input 
                                        type="number" value={item.val}
                                        disabled={!item.state}
                                        onChange={(e) => item.valSetter(Number(e.target.value))}
                                        className="w-16 p-1 text-right text-sm border-b border-slate-300 focus:border-blue-500 outline-none bg-transparent"
                                        />
                                    </div>
                                </div>
                            ))}
                            
                            {/* 自定义费用列表 (新增) */}
                            {customExpenses.map((expense) => (
                            <div key={expense.id} className="flex items-center justify-between p-2 bg-yellow-50 rounded border border-yellow-100 animate-in fade-in slide-in-from-left-4">
                                <div className="flex items-center gap-2 flex-1">
                                <button onClick={() => removeCustomExpense(expense.id)} className="text-slate-400 hover:text-red-500">
                                    <Trash2 className="w-3.5 h-3.5" />
                                </button>
                                <input 
                                    type="text" 
                                    value={expense.name}
                                    onChange={(e) => updateCustomExpense(expense.id, 'name', e.target.value)}
                                    className="w-24 text-sm bg-transparent border-b border-transparent hover:border-slate-300 focus:border-blue-500 outline-none text-slate-700 placeholder-slate-400"
                                    placeholder="费用名称"
                                />
                                </div>
                                <div className="flex items-center gap-1">
                                <span className="text-xs text-slate-400">¥</span>
                                <input 
                                    type="number" 
                                    value={expense.cost}
                                    onChange={(e) => updateCustomExpense(expense.id, 'cost', Number(e.target.value))}
                                    className="w-16 p-1 text-right text-sm bg-transparent border-b border-slate-300 focus:border-blue-500 outline-none"
                                />
                                </div>
                            </div>
                            ))}

                            {/* 添加自定义按钮 */}
                            <button 
                            onClick={addCustomExpense}
                            className="w-full mt-2 py-2 border-2 border-dashed border-slate-300 rounded-lg text-slate-500 text-sm hover:border-blue-400 hover:text-blue-600 flex items-center justify-center gap-2 transition-colors"
                            >
                            <Plus className="w-4 h-4" /> 添加自定义支出 (如保险/消防/聚餐)
                            </button>

                        </div>
                        </section>

                        {/* 3. 环境与营收 */}
                        <section className="bg-white p-5 rounded-xl shadow-sm border border-slate-200">
                        <h2 className="flex items-center gap-2 font-bold text-lg mb-4 text-slate-700">
                            <Zap className="w-5 h-5 text-yellow-500"/> 3. 环境与预估流水
                        </h2>

                        <div className="flex items-center justify-between mb-4 bg-orange-50 p-3 rounded-lg border border-orange-100">
                            <div className="flex items-center gap-2">
                            <AlertTriangle className="w-4 h-4 text-orange-500"/>
                            <span className="text-sm font-medium text-orange-800">深圳酷热夏季模式</span>
                            </div>
                            <div className="relative inline-block w-12 mr-2 align-middle select-none">
                                <input 
                                type="checkbox" name="toggle" id="toggle" 
                                checked={summerMode}
                                onChange={(e) => setSummerMode(e.target.checked)}
                                className="toggle-checkbox absolute block w-6 h-6 rounded-full bg-white border-4 appearance-none cursor-pointer border-slate-300 checked:right-0 checked:border-orange-500 transition-all duration-300"
                                style={{right: summerMode ? '0' : 'auto', left: summerMode ? 'auto' : '0'}}
                                />
                                <label htmlFor="toggle" className={`toggle-label block overflow-hidden h-6 rounded-full cursor-pointer ${summerMode ? 'bg-orange-500' : 'bg-slate-300'}`}></label>
                            </div>
                        </div>
                        
                        <div>
                            <label className="block text-xs text-slate-500 mb-1">单片场地预估月流水 (元)</label>
                            <input 
                            type="number" 
                            value={revenuePerCourt}
                            onChange={(e) => setRevenuePerCourt(Number(e.target.value))}
                            className="w-full p-2 border border-slate-300 rounded text-sm focus:ring-2 focus:ring-blue-500 outline-none"
                            />
                        </div>
                        </section>
                    </div>

                    {/* 右侧：结果展示区 */}
                    <div className="lg:col-span-7 space-y-6">
                        
                        {/* 核心结论卡片 */}
                        <div className={`p-6 rounded-xl shadow-md text-white transition-all duration-500 ${calculations.monthlyProfit > 0 ? 'bg-gradient-to-br from-emerald-500 to-teal-700' : 'bg-gradient-to-br from-red-500 to-pink-700'}`}>
                        <div className="grid grid-cols-2 gap-6">
                            <div>
                            <h3 className="text-emerald-100 text-sm font-medium uppercase tracking-wider mb-1">预估月纯利润</h3>
                            <div className="text-4xl font-bold">
                                ¥ {Math.floor(calculations.monthlyProfit).toLocaleString()}
                            </div>
                            <div className="text-emerald-50 text-xs mt-2 opacity-80">
                                收入 ¥{calculations.monthlyRevenue.toLocaleString()} - 支出 ¥{Math.floor(calculations.totalMonthlyCost).toLocaleString()}
                            </div>
                            </div>
                            <div className="border-l border-white/20 pl-6">
                            <h3 className="text-emerald-100 text-sm font-medium uppercase tracking-wider mb-1">预计回本周期</h3>
                            <div className="text-4xl font-bold flex items-end gap-2">
                                {calculations.roiMonths > 120 ? "10年以上" : Math.ceil(calculations.roiMonths)} 
                                <span className="text-xl font-normal mb-1">个月</span>
                            </div>
                            <div className="text-emerald-50 text-xs mt-2 opacity-80">
                                总投资 ¥{Math.floor(calculations.totalInvestment).toLocaleString()}
                            </div>
                            </div>
                        </div>
                        </div>

                        {/* 详细财务报表 */}
                        <div className="bg-white rounded-xl shadow-sm border border-slate-200 overflow-hidden">
                        <div className="bg-slate-50 px-6 py-4 border-b border-slate-200 flex justify-between items-center">
                            <h3 className="font-bold text-slate-700 flex items-center gap-2">
                            <Wallet className="w-4 h-4" /> 财务详情表
                            </h3>
                        </div>
                        
                        <div className="p-6">
                            {/* 1. 一次性投入详情 */}
                            <div className="mb-6">
                            <h4 className="text-xs font-bold text-slate-400 uppercase tracking-wide mb-3">一次性硬件投入 (CAPEX)</h4>
                            <div className="space-y-2">
                                <div className="flex justify-between text-sm">
                                <span className="text-slate-600">空调设备 ({numCourts}台 x ¥4000)</span>
                                <span className="font-mono text-slate-800">¥{calculations.investAC.toLocaleString()}</span>
                                </div>
                                <div className="flex justify-between text-sm">
                                <span className="text-slate-600">照明系统 ({numCourts}套 x ¥2000)</span>
                                <span className="font-mono text-slate-800">¥{calculations.investLights.toLocaleString()}</span>
                                </div>
                                {/* 地面详细 */}
                                <div className="flex justify-between text-sm bg-slate-50 p-2 rounded">
                                <div className="flex flex-col">
                                    <span className="text-slate-700 font-medium">地面铺设工程</span>
                                    <span className="text-xs text-slate-400">
                                    {calculations.actualKeelCourts > 0 && `龙骨${calculations.actualKeelCourts}片 `}
                                    {calculations.actualMatCourts > 0 && `普铺${calculations.actualMatCourts}片`}
                                    </span>
                                </div>
                                <span className="font-mono text-slate-800">¥{calculations.investFloorTotal.toLocaleString()}</span>
                                </div>
                                <div className="flex justify-between text-sm">
                                <span className="text-slate-600">杂项/前台/不可预见费 (5%)</span>
                                <span className="font-mono text-slate-800">¥{calculations.otherDecorAndMisc.toLocaleString()}</span>
                                </div>
                                <div className="flex justify-between text-sm font-bold pt-2 border-t border-slate-100">
                                <span className="text-slate-800">总启动资金</span>
                                <span className="text-blue-600">¥{calculations.totalInvestment.toLocaleString()}</span>
                                </div>
                            </div>
                            </div>

                            {/* 2. 月度支出详情 */}
                            <div>
                            <h4 className="text-xs font-bold text-slate-400 uppercase tracking-wide mb-3">每月运营成本 (OPEX)</h4>
                            <table className="w-full text-sm">
                                <thead>
                                <tr className="text-left text-slate-400 border-b border-slate-100">
                                    <th className="pb-2 font-medium">项目</th>
                                    <th className="pb-2 font-medium text-right">金额 (元)</th>
                                    <th className="pb-2 font-medium text-right">占比</th>
                                </tr>
                                </thead>
                                <tbody className="divide-y divide-slate-50">
                                <tr>
                                    <td className="py-2 text-slate-600">场地租金</td>
                                    <td className="py-2 text-right font-mono">¥{calculations.monthlyRent.toLocaleString()}</td>
                                    <td className="py-2 text-right text-xs text-slate-400">{Math.round(calculations.monthlyRent/calculations.totalMonthlyCost*100)}%</td>
                                </tr>
                                <tr>
                                    <td className="py-2 text-slate-600">电费/水费</td>
                                    <td className="py-2 text-right font-mono text-orange-600">¥{Math.floor(calculations.monthlyElec + calculations.monthlyWater).toLocaleString()}</td>
                                    <td className="py-2 text-right text-xs text-slate-400">{Math.round((calculations.monthlyElec + calculations.monthlyWater)/calculations.totalMonthlyCost*100)}%</td>
                                </tr>
                                <tr>
                                    <td className="py-2 text-slate-600">人员薪资 (馆主/教练/保洁)</td>
                                    <td className="py-2 text-right font-mono">¥{calculations.monthlyStaff.toLocaleString()}</td>
                                    <td className="py-2 text-right text-xs text-slate-400">{Math.round(calculations.monthlyStaff/calculations.totalMonthlyCost*100)}%</td>
                                </tr>
                                {calculations.monthlyCustom > 0 && (
                                    <tr>
                                    <td className="py-2 text-slate-600">自定义支出</td>
                                    <td className="py-2 text-right font-mono text-purple-600">¥{calculations.monthlyCustom.toLocaleString()}</td>
                                    <td className="py-2 text-right text-xs text-slate-400">{Math.round(calculations.monthlyCustom/calculations.totalMonthlyCost*100)}%</td>
                                    </tr>
                                )}
                                <tr>
                                    <td className="py-2 text-slate-600">其他 (推广/维护/宽带)</td>
                                    <td className="py-2 text-right font-mono">¥{calculations.monthlyExtras.toLocaleString()}</td>
                                    <td className="py-2 text-right text-xs text-slate-400">{Math.round(calculations.monthlyExtras/calculations.totalMonthlyCost*100)}%</td>
                                </tr>
                                <tr className="bg-slate-50 font-bold">
                                    <td className="py-3 text-slate-800">每月总支出</td>
                                    <td className="py-3 text-right text-red-600">¥{Math.floor(calculations.totalMonthlyCost).toLocaleString()}</td>
                                    <td className="py-3 text-right">100%</td>
                                </tr>
                                </tbody>
                            </table>
                            </div>
                        </div>
                        </div>

                        {/* 专家建议 Tip */}
                        <div className="bg-blue-50 border-l-4 border-blue-500 p-4 rounded-r-lg space-y-3">
                        <div className="flex items-start gap-3">
                            <Info className="w-5 h-5 text-blue-600 mt-1" />
                            <div>
                            <h4 className="font-bold text-blue-800 text-sm">专家查漏补缺 (Updated)：</h4>
                            <ul className="list-disc list-inside text-sm text-blue-700 mt-1 space-y-1">
                                <li><span className="font-semibold">关于教练薪资：</span>虽然您预算了10000元，但一般建议采用“底薪+课时提成”模式（例如底薪3000+提成），或者直接租场地给教练团队（0成本反而收租金），这样能极大降低您的固定支出风险。</li>
                                <li><span className="font-semibold">关于保险：</span>您在官田开馆，属于人员密集场所，强烈建议购买<b>“公众责任险”</b>（场地险），一年大概几千块，防止顾客受伤纠纷，您可以使用上方的“自定义支出”功能添加这笔预算。</li>
                                <li><span className="font-semibold">关于龙骨：</span>如果针对散客，普通5.0mm地胶足够了；如果不做比赛，建议可以减少龙骨场地的比例，因为龙骨不仅造价高，后期回弹力维护也麻烦。</li>
                            </ul>
                            </div>
                        </div>
                        </div>

                    </div>
                    </div>
                </div>
                </div>
            );
        }

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<BadmintonCalculator />);
    </script>
</body>
</html>